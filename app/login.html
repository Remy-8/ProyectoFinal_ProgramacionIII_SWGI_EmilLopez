<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Login - Mini CRUD Selenium</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <div class="page-container">
    <div class="page-header-line"></div>

    <div class="cyber-badge">Access Node · SECURE LOGIN</div>
    <h1>Pantalla de login</h1>
    <p class="login-subtitle">
      Autentícate para acceder al panel de gestión de items.
    </p>

    <div id="flashContainer"></div>

    <form id="loginForm">
      <div>
        <label for="username">Usuario</label>
        <input type="text" id="username" name="username">
      </div>

      <div>
        <label for="password">Contraseña</label>
        <input type="password" id="password" name="password">
      </div>

      <button type="submit" id="btnLogin">Iniciar sesión</button>
    </form>

    <div class="error-message" id="loginError" style="display:none;"></div>
  </div>

  <script>
    const VALID_USERNAME = "usuario_valido";
    const VALID_PASSWORD = "clave_valida";

    function showFlashMessageIfNeeded() {
      const msg = localStorage.getItem("flashMessage");
      if (msg) {
        const cont = document.getElementById("flashContainer");
        cont.innerHTML = '<p class="flash-message">' + msg + '</p>';
        localStorage.removeItem("flashMessage");
      }
    }

    function handleLogin(event) {
      event.preventDefault();

      const usernameInput = document.getElementById("username");
      const passwordInput = document.getElementById("password");
      const errorDiv = document.getElementById("loginError");

      const username = usernameInput.value.trim();
      const password = passwordInput.value.trim();

      if (!username || !password) {
        errorDiv.textContent = "Debe ingresar usuario y contraseña.";
        errorDiv.style.display = "block";
        return;
      }

      if (username === VALID_USERNAME && password === VALID_PASSWORD) {
        localStorage.setItem("loggedIn", "true");
        window.location.href = "items.html";
      } else {
        errorDiv.textContent = "Usuario o contraseña incorrectos";
        errorDiv.style.display = "block";
      }
    }

    document.getElementById("loginForm").addEventListener("submit", handleLogin);
    showFlashMessageIfNeeded();
  </script>

</body>
</html>
